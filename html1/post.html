<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test POST - Webserv</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üì§ Test M√©thode POST</h1>
            <p>Tester l'envoi de donn√©es au serveur</p>
        </header>

        <nav>
            <ul>
                <li><a href="/index.html">Accueil</a></li>
                <li><a href="/get.html">GET</a></li>
                <li><a href="/post.html" class="active">POST</a></li>
                <li><a href="/delete.html">DELETE</a></li>
                <li><a href="/upload.html">Upload</a></li>
                <li><a href="/errors.html">Erreurs</a></li>
                <li><a href="/cgi.html">CGI</a></li>
                <li><a href="/uploads/">Autoindex</a></li>
            </ul>
        </nav>

        <div class="card">
            <h2><span class="method-badge method-post">POST</span> Tests</h2>
            
            <div class="tabs">
                <button class="tab active" data-tab="tab-form">Formulaire</button>
                <button class="tab" data-tab="tab-json">JSON</button>
                <button class="tab" data-tab="tab-large">Large Payload</button>
            </div>

            <!-- Formulaire standard -->
            <div id="tab-form" class="tab-content active">
                <h3>Formulaire (application/x-www-form-urlencoded)</h3>
                <form id="test-form" onsubmit="event.preventDefault(); testPostForm();">
                    <div class="form-group">
                        <label for="post-name">Nom :</label>
                        <input type="text" id="post-name" name="name" value="John Doe" required>
                    </div>
                    <div class="form-group">
                        <label for="post-email">Email :</label>
                        <input type="email" id="post-email" name="email" value="john@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="post-message">Message :</label>
                        <textarea id="post-message" name="message" required>Ceci est un message de test pour le serveur Webserv.</textarea>
                    </div>
                    <button type="submit" class="btn btn-success">
                        üì§ Envoyer POST
                    </button>
                </form>
                
                <h4>Format envoy√© :</h4>
                <pre>
POST /cgi-bin/test.py HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Content-Length: [taille]

name=John+Doe&email=john%40example.com&message=...
                </pre>
            </div>

            <!-- JSON -->
            <div id="tab-json" class="tab-content">
                <h3>JSON (application/json)</h3>
                <div class="form-group">
                    <label for="post-json">Donn√©es JSON :</label>
                    <textarea id="post-json" rows="8">{
    "name": "John Doe",
    "email": "john@example.com",
    "age": 25,
    "interests": ["programming", "web", "42"],
    "active": true
}</textarea>
                </div>
                <button class="btn btn-success" onclick="testPostJSON()">
                    üì§ Envoyer JSON
                </button>
                
                <h4>Format envoy√© :</h4>
                <pre>
POST /cgi-bin/test.py HTTP/1.1
Content-Type: application/json
Content-Length: [taille]

{"name": "John Doe", ...}
                </pre>
            </div>

            <!-- Large Payload -->
            <div id="tab-large" class="tab-content">
                <h3>Test de charge (Large Payload)</h3>
                <div class="alert alert-warning">
                    ‚ö†Ô∏è Ce test permet de v√©rifier la gestion des gros payloads et la limite client_max_body_size.
                </div>
                <div class="form-group">
                    <label for="payload-size">Taille du payload (caract√®res) :</label>
                    <select id="payload-size">
                        <option value="100">100 octets</option>
                        <option value="1000" selected>1 Ko</option>
                        <option value="10000">10 Ko</option>
                        <option value="100000">100 Ko</option>
                        <option value="1000000">1 Mo</option>
                        <option value="10000000">10 Mo (test 413)</option>
                    </select>
                </div>
                <button class="btn btn-warning" onclick="testPostLarge()">
                    üöÄ Envoyer gros payload
                </button>
                
                <h4>Codes de r√©ponse attendus :</h4>
                <ul>
                    <li><span class="badge badge-success">200</span> - Payload accept√©</li>
                    <li><span class="badge badge-danger">413</span> - Payload Too Large (d√©passement de la limite)</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>üì§ R√©ponse du serveur</h2>
            <div id="post-response" class="response-box">
                <span class="status">En attente d'une requ√™te...</span>
            </div>
        </div>

        <div class="card">
            <h2>üìö Documentation POST</h2>
            <table>
                <tr>
                    <th>Content-Type</th>
                    <th>Description</th>
                    <th>Utilisation</th>
                </tr>
                <tr>
                    <td><code>application/x-www-form-urlencoded</code></td>
                    <td>Formulaires HTML standard</td>
                    <td>Donn√©es simples (cl√©=valeur)</td>
                </tr>
                <tr>
                    <td><code>multipart/form-data</code></td>
                    <td>Upload de fichiers</td>
                    <td>Fichiers + donn√©es mixtes</td>
                </tr>
                <tr>
                    <td><code>application/json</code></td>
                    <td>Donn√©es JSON</td>
                    <td>API REST, donn√©es structur√©es</td>
                </tr>
                <tr>
                    <td><code>text/plain</code></td>
                    <td>Texte brut</td>
                    <td>Donn√©es textuelles simples</td>
                </tr>
            </table>
        </div>

        <footer>
            <p>Webserv Test Suite - 42 Project</p>
        </footer>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>
