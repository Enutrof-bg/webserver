server {
	listen 8081;
	server_name localhost;
	host 127.0.0.1;
	root ./html1;
	index index.html;
	client_max_body_size 10M;
	
	# Pages d'erreur personnalisées
	error_page 404 ./html1/errors.html;
	error_page 500 ./html1/errors.html;

	# Route principale
	location / {
		autoindex off;
		allowed_methods GET POST DELETE;
	}

	# Route pour les fichiers CSS
	location /css {
		autoindex off;
		allowed_methods GET;
	}

	# Route pour les fichiers JS
	location /js {
		autoindex off;
		allowed_methods GET;
	}

	# Route pour les uploads avec autoindex activé
	location /uploads {
		root ./;
		autoindex on;
		allowed_methods GET POST DELETE;
	}

	# Route CGI pour les scripts Python
	location /cgi-bin {
		root ./;
		allowed_methods GET POST DELETE;
		cgi_path /usr/bin/python3 /bin/bash;
		cgi_ext .py .sh;
	}

	# Route de redirection pour tester les redirections
	location /redirect-test {
		return /index.html;
	}

	# Route pour tester autoindex
	location /autoindex-demo {
		root ./uploads;
		autoindex on;
		allowed_methods GET;
	}
}
